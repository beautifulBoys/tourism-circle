{"version":3,"sources":["../../src/controller/saveImg.js"],"names":["req","res","form","formidable","IncomingForm","src","join","__dirname","uploadDir","parse","err","fields","files","console","log","item","oldname","path","newname","Date","name","split","rename","writeHead","end"],"mappings":";;;;;;;;;;;;;;AACA;;;;AACA;;;;;;;sFAEe,iBAAOA,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACTC,gBADS,GACF,IAAIC,WAAWC,YAAf,EADE;AAETC,eAFS,GAEH,eAAKC,IAAL,CAAUC,SAAV,EAAqB,iBAArB,CAFG;;AAGbL,iBAAKM,SAAL,GAAiBH,GAAjB;AACAH,iBAAKO,KAAL,CAAWT,GAAX,EAAgB,UAACU,GAAD,EAAMC,MAAN,EAAcC,KAAd,EAAwB;AACtCC,sBAAQC,GAAR,CAAYF,KAAZ;AACA,mBAAKG,IAAL,IAAaH,KAAb,EAAoB;AAClB,iBAAC,YAAU;AACP,sBAAII,UAAUJ,MAAMG,IAAN,EAAYE,IAA1B;AACA,sBAAIC,UAAUb,MAAOc,KAAKV,KAAL,CAAW,IAAIU,IAAJ,EAAX,IAAyB,IAAhC,GAAwC,GAAxC,GAA8CP,MAAMG,IAAN,EAAYK,IAAZ,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAA5D;AACA,+BAAGC,MAAH,CAAUN,OAAV,EAAmBE,OAAnB,EAA4B,UAACR,GAAD,EAAS,CAAE,CAAvC;AACH,iBAJD,EAIGK,IAJH;AAKD;AACDd,kBAAIsB,SAAJ,CAAc,GAAd,EAAmB,EAAC,gBAAgB,YAAjB,EAAnB;AACAtB,kBAAIuB,GAAJ,CAAQ,EAAR;AAED,aAZD;;AAJa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","file":"saveImg.js","sourcesContent":["\r\nimport path from 'path';\r\nimport fs from 'fs';\r\n\r\nexport default async (req, res) => {\r\n  var form = new formidable.IncomingForm();\r\n  var src = path.join(__dirname, '../../resource/');\r\n  form.uploadDir = src;\r\n  form.parse(req, (err, fields, files) => {\r\n    console.log(files);\r\n    for (item in files) {\r\n      (function(){\r\n          var oldname = files[item].path;\r\n          var newname = src + (Date.parse(new Date()) / 1000) + '.' + files[item].name.split('.')[1];\r\n          fs.rename(oldname, newname, (err) => {});\r\n      })(item);\r\n    }\r\n    res.writeHead(200, {'content-type': 'text/plain'});\r\n    res.end('');\r\n    \r\n  });\r\n};"]}