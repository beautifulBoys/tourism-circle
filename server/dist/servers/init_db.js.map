{"version":3,"sources":["../../src/servers/init_db.js"],"names":["findOne","type","obj_user","update","_id","value","multi","create","obj_post","obj_message","obj_image"],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;2FAEe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAEQ,aAAGA,OAAH,CAAW,EAACC,MAAM,QAAP,EAAX,CAFR;;AAAA;AAETC,kBAFS;;AAAA,eAGTA,QAHS;AAAA;AAAA;AAAA;;AAAA;AAAA,iBAGO,aAAGC,MAAH,CAAU,EAACC,KAAKF,SAASE,GAAf,EAAV,EAA+B,EAACC,OAAOH,SAASG,KAAT,GAAiB,CAAzB,EAA/B,EAA4D,EAACC,OAAO,KAAR,EAA5D,EAA4E,YAAM,CAAE,CAApF,CAHP;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,iBAIF,aAAGC,MAAH,CAAU,EAACN,MAAM,QAAP,EAAV,CAJE;;AAAA;AAAA;AAAA,iBAOQ,aAAGD,OAAH,CAAW,EAACC,MAAM,QAAP,EAAX,CAPR;;AAAA;AAOTO,kBAPS;;AAAA,eAQTA,QARS;AAAA;AAAA;AAAA;;AAAA;AAAA,iBAQO,aAAGL,MAAH,CAAU,EAACC,KAAKI,SAASJ,GAAf,EAAV,EAA+B,EAACC,OAAOG,SAASH,KAAT,GAAiB,CAAzB,EAA/B,EAA4D,EAACC,OAAO,KAAR,EAA5D,EAA4E,YAAM,CAAE,CAApF,CARP;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,iBASF,aAAGC,MAAH,CAAU,EAACN,MAAM,QAAP,EAAV,CATE;;AAAA;AAAA;AAAA,iBAYW,aAAGD,OAAH,CAAW,EAACC,MAAM,WAAP,EAAX,CAZX;;AAAA;AAYTQ,qBAZS;;AAab,cAAIA,WAAJ,EAAiB,aAAGN,MAAH,CAAU,EAACC,KAAKK,YAAYL,GAAlB,EAAV,EAAkC,EAACC,OAAOI,YAAYJ,KAAZ,GAAoB,CAA5B,EAAlC,EAAkE,EAACC,OAAO,KAAR,EAAlE,EAAkF,YAAM,CAAE,CAA1F,EAAjB,KACK,aAAGC,MAAH,CAAU,EAACN,MAAM,WAAP,EAAV;;AAEL;AAhBa;AAAA,iBAiBS,aAAGD,OAAH,CAAW,EAACC,MAAM,UAAP,EAAX,CAjBT;;AAAA;AAiBTS,mBAjBS;;AAAA,eAkBTA,SAlBS;AAAA;AAAA;AAAA;;AAAA;AAAA,iBAkBQ,aAAGP,MAAH,CAAU,EAACC,KAAKM,UAAUN,GAAhB,EAAV,EAAgC,EAACC,OAAOK,UAAUL,KAAV,GAAkB,CAA1B,EAAhC,EAA8D,EAACC,OAAO,KAAR,EAA9D,EAA8E,YAAM,CAAE,CAAtF,CAlBR;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,iBAmBF,aAAGC,MAAH,CAAU,EAACN,MAAM,UAAP,EAAV,CAnBE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C","file":"init_db.js","sourcesContent":["import Id from '../model/id.js'\r\n\r\nexport default async () => {\r\n  // 初始化时 创建id表\r\n  let obj_user = await Id.findOne({type: 'userId'})\r\n  if (obj_user) await Id.update({_id: obj_user._id}, {value: obj_user.value + 1}, {multi: false}, () => {})\r\n  else await Id.create({type: 'userId'})\r\n\r\n  // 初始化 创建post表\r\n  let obj_post = await Id.findOne({type: 'postId'})\r\n  if (obj_post) await Id.update({_id: obj_post._id}, {value: obj_post.value + 1}, {multi: false}, () => {})\r\n  else await Id.create({type: 'postId'})\r\n\r\n  // 初始化 创建message表\r\n  let obj_message = await Id.findOne({type: 'messageId'})\r\n  if (obj_message) Id.update({_id: obj_message._id}, {value: obj_message.value + 1}, {multi: false}, () => {})\r\n  else Id.create({type: 'messageId'})\r\n\r\n  // 初始化 创建image表\r\n  let obj_image = await Id.findOne({type: 'imagesId'})\r\n  if (obj_image) await Id.update({_id: obj_image._id}, {value: obj_image.value + 1}, {multi: false}, () => {})\r\n  else await Id.create({type: 'imagesId'})\r\n}\r\n"]}