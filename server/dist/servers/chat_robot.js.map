{"version":3,"sources":["../../src/servers/chat_robot.js"],"names":["http","require","errObj","result","content","qingyunkeUrl","socketList","ajax","text","resolve","reject","get","encodeURI","req","setEncoding","on","data","e","console","log","err","fn","JSON","parse"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;;AAEA,IAAMC,SAAS;AACbC,UAAQ,CADK;AAEbC,WAAS;AAFI,CAAf;AAIA,IAAMC,eAAe,wDAArB;;AAEA,IAAIC,aAAa,EAAjB;AACA,SAASC,IAAT,CAAeC,IAAf,EAAqB;AACnB,SAAO,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAI;AACFV,WAAKW,GAAL,CAASN,eAAeO,UAAUJ,IAAV,CAAxB,EAAyC,UAACK,GAAD,EAAS;AAChDA,YAAIC,WAAJ,CAAgB,MAAhB;AACAD,YAAIE,EAAJ,CAAO,MAAP,EAAe,UAAUC,IAAV,EAAgB;AAC7BP,kBAAQO,IAAR;AACD,SAFD;AAGAH,YAAIE,EAAJ,CAAO,OAAP,EAAgB,UAACE,CAAD,EAAO;AACrBC,kBAAQC,GAAR,CAAY,WAAZ,EAAyBF,CAAzB;AACAR,kBAAQP,MAAR;AACD,SAHD;AAID,OATD;AAUD,KAXD,CAWE,OAAOkB,GAAP,EAAY;AACZX,cAAQP,MAAR;AACD;AACF,GAfM,CAAP;AAgBD;;;sFACc,iBAAOM,IAAP,EAAaa,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEQd,KAAKC,IAAL,CAFR;;AAAA;AAEPL,kBAFO;;AAGXkB,eAAGC,KAAKC,KAAL,CAAWpB,MAAX,CAAH;AAHW;AAAA;;AAAA;AAAA;AAAA;;AAKXkB,eAAGnB,MAAH;;AALW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","file":"chat_robot.js","sourcesContent":["var http = require('http');\r\n\r\nconst errObj = {\r\n  result: 0,\r\n  content: '没有理解你的意思，你能说的简单一点吗？'\r\n};\r\nconst qingyunkeUrl = 'http://api.qingyunke.com/api.php?key=free&appid=0&msg=';\r\n\r\nlet socketList = [];\r\nfunction ajax (text) {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      http.get(qingyunkeUrl + encodeURI(text), (req) => {\r\n        req.setEncoding('utf8');  \r\n        req.on('data', function (data) {\r\n          resolve(data); \r\n        });\r\n        req.on('error', (e) => {\r\n          console.log('我是ajax的错误', e);\r\n          resolve(errObj); \r\n        });\r\n      });\r\n    } catch (err) {\r\n      resolve(errObj);\r\n    }\r\n  });\r\n}\r\nexport default async (text, fn) => {\r\n  try {\r\n    let result = await ajax(text);\r\n    fn(JSON.parse(result));\r\n  } catch (err) {\r\n    fn(errObj);\r\n  }\r\n};"]}